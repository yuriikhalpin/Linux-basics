# Стандартные утилиты

## Базовая диагностика

### UPTIME
Литература:
```
man uptime
```

#### Примеры использования

Вывести время работы сервера после загрузки
```
uptime
```

#### Самостоятельная работа

Задача 1. Изучить опции -p и -s

### WHOAMI
Литература:
```
man whoami
```

#### Примеры использования

Вывести имя текущего пользователя
```
whoami
```

### TTY / WHO / W
Литература:
```
man tty
man who
man w
```

#### Примеры использования

Вывести информацию о подключенном терминале
```
tty
```
Вывести информацию о залогиненых пользователях
```
w
who
```

#### Самостоятельная работа

Задача 1. Сравнить разницу в выводе W и WHO

### HOSTNAME
Литература:
```
man hostname
```

#### Примеры использования

Вывести информацию о имени хоста
```
hostname
```

#### Самостоятельная работа

Задача 1. Вывести короткое имя хоста

### LAST / LASTB / LASTLOG
Литература:
```
man last
man lastb
man lastlog
```

#### Примеры использования

Вывести список с последними залогинеными пользователями
```
last
lastb
```

Вывести информацию о недавно залогиненых пользователях
```
lastlog
```

#### Самостоятельная работа

Задача 1. Сравнить вывод LAST и LASTB
Задача 1. Вывести список "перезагрузок" командой LAST

### UNAME
Литература:
```
man uname
```

#### Примеры использования

Вывести имя ядра
```
uname
uname -s
```

#### Самостоятельная работа

Задача 1. Изучить все опции команды UNAME

### WHICH / WHEREIS / TYPE
Литература:
```
man which
man whereis
man type
```

#### Примеры использования

Определить полный путь к исполняемому файлу(команде)
```
which ls
```

Определить полный путь к исполняемому файлу(команде), файлам с исходными кодами и документацией
```
whereis ls
```

Вывести описание команды
```
type ls
```

#### Самостоятельная работа

Задача 1. Вывести описание команды pwd

Задача 2. Вывести описание команды rm

Задача 3. Вывести путь к исполняемому файлу cd

## Навигация

### PWD
Литература:
```
man pwd
```

#### Примеры использования

Определить путь к текущему каталогу
```
pwd
```

#### Самостоятельная работа

Задача 1. Изучить разницу между опциями -P и -L

### LS
Литература:
```
man ls
```

#### Примеры использования

Вывести содержимое текущего каталога - всё
```
ls -a
```

Вывести содержимое текущего каталога - только каталоги
```
ls -d
```

Вывести содержимое текущего каталога - "длинный" формат(списком)
```
ls -l
```

#### Самостоятельная работа

Задача 1. Вывести содержимое текущего каталога - вывести все содержимое кроме . и ..

Задача 2. Вывести содержимое текущего каталога - вывести список с данными об inode

Задача 3. Вывести содержимое корневого каталога / - вывести список файлов в порядке "новые сначала"

Задача 4. Вывести содержимое корневого каталога / - вывести список файлов в порядке "новые старые"

Задача 5. Вывести рекурсивно содержимое каталога /var/log

### TREE
Литература:
```
man tree
```

#### Примеры использования

Задача 2. Вывести содержимое текущего каталога - всё
```
tree -a
```

Задача 3. Вывести содержимое корневого каталога - только каталоги
```
tree -d /
```

Задача 4. Вывести содержимое каталога /var/log - с полным путём
```
tree -f /var/log
```

#### Самостоятельная работа

Задача 1. Вывести содержимое текущего каталога - с указанием прав доступа

Задача 2. Вывести содержимое каталога /var/log - c указанием владельца

Задача 3. Вывести содержимое каталога /var/log - c указанием группы

### CD
Литература:
```
man cd
```

#### Примеры использования

!!! Для проверки своего местоположения используем команду ``` pwd ``` !!!

Переход в каталог с логами
```
cd /var/log
```

Переход в корневой каталог
```
cd /
```

Переход в дочерний каталог etc из корневого каталога
```
cd etc
```

Переход в дочерний каталог systemd/system из etc каталога
``` cd systemd/system ```

Переход в родительский каталог
```
cd ..
```

Переход в каталог /etc/ssh используя относительный путь из /etc/systemd
```
cd ../ssh
```

Переход в предыдущий каталог
```
cd -
```

#### Самостоятельная работа

Задача 1. Переместится в домашний каталог

Задача 2. Переместится в каталог /usr/local/share/man

Задача 3. Переместится на один уровень выше из текущего каталог

Задача 4. Переместится в домашний каталог

## Работа с файлами

### MKDIR
Литература:
```
man mkdir
```

#### Примеры использования

Создаем один каталог
```
mkdir /tmp/test1
```

Создаем несколько каталога одной командой
```
mkdir /tmp/test2 /tmp/test3
mkdir /tmp/{test4,test5}
```

#### Самостоятельная работа

Задача 1. Создать каталоги
* /srv
* /srv/site1
* /srv/site2

Задача 2. Создать каталог /srv/site3/log

Задача 3. Создать каталог /srv/site1/log c правами 111

Задача 3. Создать каталог /srv/site2/log c правами 333(одной командой)

### RMDIR
Литература:
```
man rmdir
```

#### Примеры использования

Удаляем один каталог
```
rmdir /tmp/test1
```

Удаляем несколько каталога одной командой
```
rmdir /tmp/test2 /tmp/test3
rmdir /tmp/{test4,test5}
```

#### Самостоятельная работа

Задача 1. Удалить каталог /srv/site3

### CAT
Литература:
```
man cat
```

#### Примеры использования

Выводим содержимое файлов
```
cat /etc/passwd

cat /etc/shadow

cat /etc/hosts

cat /etc/shells
```

Сохранение вывода в файл
```
cat /etc/passwd > /srv/1

cat /etc/shadow > /srv/2

cat /etc/hosts > /srv/3

cat /etc/shells > /srv/4
```

Сохранение вывода нескольких файлов в один файл
```
cat /etc/hosts >> /srv/merge

cat /etc/shells >> /srv/merge
```

#### Самостоятельная работа

Задача 1. Вывести содержимое файла с нумерацией строк
* /etc/shells
* /etc/shadow
* /etc/hosts
* /etc/services

### CP
Литература:
```
man cp
```

#### Примеры использования

Копируем файл с оригинальным именем и с новым именем
```
cp /etc/hosts /srv/
cp /etc/hosts /srv/hosts_copy

cp /etc/shells /srv/
cp /etc/shells /srv/shells_copy
```

#### Самостоятельная работа

Задача 1. Скопировать следующие файлы в /srv c новым именем
* /etc/services
* /etc/shadow

### Touch
Литература:
```
man touch
```

#### Примеры использования

Создаем пустой файл
```
touch file
touch /srv/file
touch /srv/{f1,f2,f3}
```

#### Самостоятельная работа

Задача 1. Создать файл new_file в следующих каталогах
* ~/
* ./
* /srv

### MV
Литература:
```
man mv
```

#### Примеры использования

Переименовываем файл
```
mv file file_moved
mv /srv/file /srv/file_moved

```

Перемещаем файл
```
mv /srv/f1 /tmp
mv /srv/f2 /tmp

```

#### Самостоятельная работа

Задача 1. Создать каталог new_dir и переименовать его в old_dir

Задача 2. Создать каталог new_dir и переместить его в /srv


### RM
Литература:
```
man rm
```

#### Примеры использования

Удаляем файл
```
touch test_file1
rm test_file1
touch test_file1
rm -v test_file1
```

Удаляем не пустой каталог
```
mkdir dir1
touch dir1/file1
rmdir dir1
rm -R dir1
```

#### Самостоятельная работа

Задача 1. Создать каталог new_dir c двумя пустыми файлами и удалить его

Задача 2. Создать пустой файл new_file и удалить его

### ECHO
Литература:
```
man echo
```

#### Примеры использования

Выводим строку на экран
```
echo "Hello World!"
echo 'Hello World!'
echo Hello
echo
echo  World
echo !
```

Выводим значение переменных
```
echo $PWD
echo $SHELL
echo $USER
echo %HOME
echo $PATH
VAR="Hello!"
echo $VAR
```

Создание файла
```
echo $PWD > test_file123
echo $SHELL > test_file123
echo $USER > test_file123
echo %HOME > test_file123
echo $PATH > test_file123
VAR="Hello!"
echo $VAR > test_file123
```

#### Самостоятельная работа

Задача 1. Создать файл /tmp/HW содержащий строку "dfksfjkvzbvmsjkthryhl"

---

## Работа с пользователями и группами

### GROUPADD
Литература:
```
man groupadd
```

Создание группы с именем test
```
groupadd test
```

#### Самостоятельная работа

Задача 1. Создать группу test1 c GID 10000

Задача 2. Создать группу test2  и test3 c GID 20000

### GROUPMOD
Литература:
```
man groupmod
```

#### Примеры использования

Изменить GID группы с именем  на 11111
```
groupmod -g 11111 test
```

#### Самостоятельная работа

Задача 1. Переименовать группу test в tset

### GROUPDEL
Литература:
```
man groupdel
```

#### Примеры использования

Удаление группы с именем tset
```
groupdel tset
```

#### Самостоятельная работа

Задача 1. Удалить группу test1

### USERADD
Литература:
```
man useradd
```

#### Примеры использования

Создание пользователя user
```
useradd user
```

#### Самостоятельная работа

Задача 1. Изучить опции команды useradd

Задача 2. Создать пользователя user1 со следующими параметрами
  - домашний каталог /home/user1_home
  - UID 232323
  - GID 20000
  - Шелл /bin/dash

Задача 2. Создать пользователя user2 со следующими параметрами
  - домашний каталог /home/user2_home
  - UID 44444
  - GID 55555
  - Шелл /bin/sh

Задача 3. Создать пользователя user3 со следующими параметрами
  - домашний каталог /home/user3_home
  - UID 44444
  - GID 55555
  - Шелл /bin/sh

### USERMOD
Литература:
```
man usermod
```

#### Примеры использования

Смена UID
```
usermod -u 2222 user1
```

Добавить пользователя во вторичную группу sudo
```
usermod -aG sudo user1
```

#### Самостоятельная работа

Задача 1. Добавить пользователя user2 к группам sudo, bin

Задача 2. Изменить UID на 4455 пользователя user3

### USERDEL
Литература:
```
man userdel
```

#### Примеры использования

Удаление пользователя
```
userdel user1
```

#### Самостоятельная работа

Задача 1. Удалить пользователя user3

### ID / GROUPS
Литература:
```
man id
man groups
```

#### Примеры использования

Получить данные о текущем пользователе
```
id
groups
```

Получить данные о пользователе bin
```
id bin
groups bin
```

#### Самостоятельная работа

Задача 1. Изучить опции команды ID

Задача 2. Изучить документацию по следующим конфигурационным файлам
  - /etc/passwd
  - /etc/group
  - /etc/shadow
  - /etc/gshadow

Задача 3. Исследовать user2 с помощью id, groups

## Работа с правами доступа

### CHOWN / CHGRP
Литература:
```
man chown
man chgrp
```

#### Примеры использования

Смена пользователя и группы у файла на bin
```
touch /root/test_file_own_grp
ls -l /root/test_file_own_grp
chown bin /root/test_file_own_grp
chgrp sys /root/test_file_own_grp
ls -l /root/test_file_own_grp
```

#### Самостоятельная работа

Задача 1. Рекурсивная смена владельца каталога со всеми файлами
  - Создать каталог /tmp/testdir1 c файлами: file1, file2, test3
  - Сменить владельца каталога и файлов на sys

Задача 2. Рекурсивная смена группы каталога со всеми файлами
  - Создать каталог /tmp/testdir2 c файлами: file1, file2, test3
  - Сменить владельца каталога и файлов на bin

### CHMOD
Литература:
```
man chmod
```

#### Примеры использования

Удаление прав доступа для всех:
```
touch /root/test_file_perm
ls -l /root/test_file_perm
chmod 0000 /root/test_file_perm
ls -l /root/test_file_perm
```

Установить права только на чтение для владельца, группы, всех остальных:
```
chmod +0400 /root/test_file_perm
ls -l /root/test_file_perm
chmod +0040 /root/test_file_perm
ls -l /root/test_file_perm
chmod +0004 /root/test_file_perm
ls -l /root/test_file_perm
```

#### Самостоятельная работа

Задача 1. Изучить опции команды chmod

Задача 2. Рекурсивная смена установить права на только запись только для владельца каталога со всеми файлами
  - Создать каталог /tmp/testdir3 c файлами: file1, file2, test3

Задача 3. Изучить установку прав доступа с помощью буквенного представления команды chmod

Задача 4. Изучить установку Sticky bit, SUID, SGID с помощью команды chmod

---
